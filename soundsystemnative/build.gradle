apply plugin: 'com.android.model.native'

model {
    android {
        compileSdkVersion rootProject.ext.compileSdkVersion

        // This allows the library project to be built in debug mode, so we can actually debug it
        publishNonDefault true
    }

    android.ndk {
        moduleName = "soundsystem"
        ldLibs.addAll(["log", "android", "atomic", "aaudio"])
        abiFilters.addAll(["arm64-v8a", "armeabi-v7a"])

        cppFlags.addAll(["-std=c++11"])
        CFlags.addAll(["-std=c99"])
        platformVersion = 26
        // AAudio headers are only available with API 26 but sdk 26 is not yet available
        stl "c++_static" // to access to 'thread' header, we did gnustl_static or c++_static
    }

    android.sources {
        main {
            jni {
                exportedHeaders {
                    srcDir "src/main/jni"
                }
            }
        }
    }
}

configurations {
    // Expose the debug version of the library to other modules
    debug
    release
}
